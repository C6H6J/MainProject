<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Dashboard | Klorofil - Free Bootstrap Dashboard Template</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <!-- VENDOR CSS -->
    <link
      rel="stylesheet"
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="assets/vendor/font-awesome/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="assets/vendor/linearicons/style.css" />
    <link
      rel="stylesheet"
      href="assets/vendor/chartist/css/chartist-custom.css"
    />
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="assets/css/main.css" />
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" href="assets/css/demo.css" />
    <!-- GOOGLE FONTS -->
    <link
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="" />
    <!-- ICONS -->
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="assets/img/apple-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="assets/img/favicon.png"
    />
    <style>
      .pagination-buttons {
        display: flex;            /* Flexbox 사용 */
        justify-content: center;  /* 버튼을 가로 중앙으로 정렬 */
        margin-top: 20px;         /* 버튼과 테이블 사이의 여백 */
        margin: 0 10px;  /* 버튼 간격 */
      }
    </style>
  </head>

  <body>
    <!-- WRAPPER -->
  <div id="wrapper">
    <!-- NAVBAR -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="brand">
        <a href="../index.html"
          ><img
            src=""
            alt="회사 로고"
            class="img-responsive logo"
        /></a>
      </div>
      <div class="container-fluid">
        <div class="navbar-btn">
          <button type="button" class="btn-toggle-fullwidth">
            <i class="lnr lnr-arrow-left-circle"></i>
          </button>
        </div>
        <form class="navbar-form navbar-left"></form>
        <div id="navbar-menu">
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a
                href="#"
                class="dropdown-toggle icon-menu"
                data-toggle="dropdown"
              >
                <i class="lnr lnr-alarm"></i>
                <span class="badge bg-danger">5</span>
              </a>
              <ul class="dropdown-menu notifications">
                <li>
                  <a href="#" class="notification-item"
                    ><span class="dot bg-warning"></span>System space is almost
                    full</a
                  >
                </li>
                <li>
                  <a href="#" class="notification-item"
                    ><span class="dot bg-danger"></span>You have 9 unfinished
                    tasks</a
                  >
                </li>
                <li>
                  <a href="#" class="notification-item"
                    ><span class="dot bg-success"></span>Monthly report is
                    available</a
                  >
                </li>
                <li>
                  <a href="#" class="notification-item"
                    ><span class="dot bg-warning"></span>Weekly meeting in 1
                    hour</a
                  >
                </li>
                <li>
                  <a href="#" class="notification-item"
                    ><span class="dot bg-success"></span>Your request has been
                    approved</a
                  >
                </li>
                <li><a href="#" class="more">See all notifications</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                ><img
                  src="assets/img/user.png"
                  class="img-circle"
                  alt="Avatar" />
                <span>Samuel</span>
                <i class="icon-submenu lnr lnr-chevron-down"></i
              ></a>
              <ul class="dropdown-menu">
                <li>
                  <a href="page-profile.html"
                    ><i class="lnr lnr-user"></i> <span>My Profile</span></a
                  >
                </li>
                <li>
                  <a href="#"
                    ><i class="lnr lnr-envelope"></i> <span>Message</span></a
                  >
                </li>
                <li>
                  <a href="#"
                    ><i class="lnr lnr-cog"></i> <span>Settings</span></a
                  >
                </li>
                <li>
                  <a href="#"
                    ><i class="lnr lnr-exit"></i> <span>Logout</span></a
                  >
                </li>
              </ul>
            </li>
            <!-- <li>
            <a class="update-pro" href="https://www.themeineed.com/downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>UPGRADE TO PRO</span></a>
          </li> -->
          </ul>
        </div>
      </div>
    </nav>
    <!-- END NAVBAR -->

    <!-- LEFT SIDEBAR -->
    <div id="sidebar-nav" class="sidebar">
      <div class="sidebar-scroll">
        <nav>
          <ul class="nav">
            <li>
              <a href="mainboard.html" class="active"
                ><i class="lnr lnr-home"></i> <span>전체 게시판</span></a
              >
            </li>
            <li>
              <a href="reviewboard.html" class=""
                ><i class="lnr lnr-code"></i> <span>시설리뷰 게시판</span></a
              >
            </li>
            <li>
              <a href="eventsboard.html" class=""
                ><i class="lnr lnr-chart-bars"></i>
                <span>봉사/행사 게시판</span></a
              >
            </li>
            <li>
              <a href="promotionboard.html" class=""
                ><i class="lnr lnr-cog"></i> <span>홍보 게시판</span></a
              >
            </li>
            <li>
              <a href="notifications.html" class=""
                ><i class="lnr lnr-alarm"></i> <span>Notifications</span></a
              >
            </li>
            <li>
              <a href="#subPages" data-toggle="collapse" class="collapsed"
                ><i class="lnr lnr-file-empty"></i> <span>Pages</span>
                <i class="icon-submenu lnr lnr-chevron-left"></i
              ></a>
              <div id="subPages" class="collapse">
                <ul class="nav">
                  <li><a href="page-profile.html" class="">Profile</a></li>
                  <li><a href="page-login.html" class="">Login</a></li>
                  <li>
                    <a href="page-lockscreen.html" class="">Lockscreen</a>
                  </li>
                </ul>
              </div>
            </li>
            <li>
              <a href="tables.html" class=""
                ><i class="lnr lnr-dice"></i> <span>Tables</span></a
              >
            </li>
            <li>
              <a href="typography.html" class=""
                ><i class="lnr lnr-text-format"></i> <span>Typography</span></a
              >
            </li>
            <li>
              <a href="icons.html" class=""
                ><i class="lnr lnr-linearicons"></i> <span>Icons</span></a
              >
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <!-- END LEFT SIDEBAR -->

    <!-- MAIN -->
    <div class="main">
      <!-- MAIN CONTENT -->
      <div class="main-content">
        <div class="container-fluid">
          <h3 class="page-title">Tables</h3>

          <!-- 검색창 영역 -->
          <div class="input-group" style="margin-bottom: 20px">
            <input
              type="text"
              value=""
              class="form-control"
              placeholder="검색어를 입력하세요..."
            />
            <span class="input-group-btn">
              <button type="button" class="btn btn-primary">Go</button>
            </span>
          </div>

          <!-- 테이블 영역 -->
          <div class="row">
            <div class="col-md-12">
              <!-- TABLE STRIPED -->
              <div class="panel">
                <div class="panel-heading">
                  <h3 class="panel-title">전체 게시판</h3>
                </div>
                <div class="panel-body table-responsive">
                  <table
                    class="table table-striped table-bordered"
                    style="width: 100%"
                  >
                  <style>
                    td:not(:nth-child(1)) {
                      text-align: center;
                    }
                  </style>
                    <thead>
                      <tr>
                        <th style="width: 73%; text-align: center;">제목</th>
                        <th style="width: 5%; text-align: center;">추천수</th>
                        <th style="width: 10%; text-align: center;">작성자</th>
                        <th style="width: 12%; text-align: center;">작성 일시</th>
                      </tr>
                    </thead>
                    <tbody id="question-list">
                      <!-- 질문 데이터가 동적으로 추가됩니다 -->
                    </tbody>          
                  </table>

                  <!-- 페이지네이션 버튼 -->
                  <div class="pagination-buttons">
                    <button id="prev-page" class="btn btn-primary">이전</button>
                    <button id="next-page" class="btn btn-primary">다음</button>
                  </div>
                </div>
              </div>
              <!-- END TABLE STRIPED -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- END MAIN CONTENT -->
  </div>
  <!-- END MAIN -->
      <div class="clearfix"></div>
      <footer>
        <div class="container-fluid">
          <p class="copyright">
            Shared by <i class="fa fa-love"></i
            ><a href="https://bootstrapthemes.co">BootstrapThemes</a>
          </p>
        </div>
      </footer>
    </div>
    <!-- END WRAPPER -->
    <!-- Javascript -->
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script src="assets/vendor/jquery.easy-pie-chart/jquery.easypiechart.min.js"></script>
    <script src="assets/vendor/chartist/js/chartist.min.js"></script>
    <script src="assets/scripts/klorofil-common.js"></script>
    
    <!-- JavaScript -->
    <script>
      // API 호출하여 질문 데이터를 가져와 테이블에 표시
      fetch('http://localhost:8080/api/questions')
        .then(response => response.json())
        .then(data => {
          const tableBody = document.getElementById('question-list');
          tableBody.innerHTML = ''; // 기존 데이터를 초기화

          data.content.forEach(question => {
            const row = document.createElement('tr'); // 새로운 행 생성

            // 제목 열
            const titleCell = document.createElement('td');
            titleCell.textContent = question.subject;
            row.appendChild(titleCell);

            // 추천수 열
            const recommendCell = document.createElement('td');
            recommendCell.textContent = question.recommendCount;
            row.appendChild(recommendCell);

            // 작성자 열
            const authorCell = document.createElement('td');
            authorCell.textContent = question.author;
            row.appendChild(authorCell);

            // 작성일 열
            const dateCell = document.createElement('td');
            dateCell.textContent = new Date(question.createDate).toLocaleString(); // 날짜 포맷
            row.appendChild(dateCell);

            // 생성된 행을 테이블 본문에 추가
            tableBody.appendChild(row);
          });
        })
        .catch(error => console.error('Error:', error));
    </script>
    
     <!-- JavaScript -->
     <script>
      let currentPage = 0; // 현재 페이지 번호

      // 데이터를 로드하는 함수
      function loadQuestions(page) {
        fetch(`http://localhost:8080/api/questions?page=${page}`)
          .then(response => response.json())
          .then(data => {
            const tableBody = document.getElementById('question-list');
            tableBody.innerHTML = ''; // 기존 데이터를 초기화

            // 테이블에 질문 데이터를 추가
            data.content.forEach(question => {
              const row = document.createElement('tr');
              row.innerHTML = `
                <td><a href="question-detail.html?id=${question.id}">${question.subject}</a></td>
                <td>${question.recommendCount}</td>
                <td>${question.author}</td>
                <td>${new Date(question.createDate).toLocaleString()}</td>
              `;
              tableBody.appendChild(row);
            });

            // 현재 페이지 번호 업데이트
            currentPage = page;

            // 이전 버튼 활성화/비활성화
            document.getElementById('prev-page').disabled = currentPage === 0;

            // 다음 버튼 활성화/비활성화 (마지막 페이지 체크)
            document.getElementById('next-page').disabled = data.last;
          })
          .catch(error => console.error('Error:', error));
      }

      // 이전 페이지 버튼 클릭 이벤트
      document.getElementById('prev-page').addEventListener('click', () => {
        if (currentPage > 0) {
          loadQuestions(currentPage - 1);
        }
      });

      // 다음 페이지 버튼 클릭 이벤트
      document.getElementById('next-page').addEventListener('click', () => {
        loadQuestions(currentPage + 1);
      });

      // 초기 로드
      loadQuestions(0);
    </script>
  </body>
</html>
